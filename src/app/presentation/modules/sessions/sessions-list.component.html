<div class="sessions-list">
  <a routerLink="/dashboard">← Dashboard</a>
  <header>
    <h1>Sesiones</h1>
    <a routerLink="/sessions/new" class="btn-primary">Nueva sesión</a>
  </header>

  @if (loading$ | async) {
    <p>Cargando sesiones...</p>
  } @else if (error$ | async; as error) {
    <p class="error">{{ error }}</p>
  } @else {
    @let sessions = sessions$ | async;
    @if (!sessions?.length) {
      <p>No hay sesiones registradas.</p>
    } @else {
      <ul class="sessions">
        @for (session of sessions; track session.id) {
          <li class="session-item">
            <a routerLink="/sessions/{{ session.id }}" (click)="select(session)">
              <span class="sport">{{ session.sport | uppercase }}</span>
              <span class="date">{{ session.date | date:'dd/MM/yyyy' }}</span>
              <span class="duration">{{ session.durationMinutes }} min</span>
              @if (session.distanceKm) {
                <span class="distance">{{ session.distanceKm }} km</span>
              }
            </a>
            <button class="btn-delete" (click)="delete($event, session)" title="Eliminar sesión">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"/>
                <path d="M19 6l-1 14a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2L5 6"/>
                <path d="M10 11v6M14 11v6"/>
                <path d="M9 6V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2"/>
              </svg>
            </button>
            <button class="btn-edit" (click)="edit($event, session)" title="Editar sesión">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
            </button>
          </li>
        }
      </ul>
    }
  }
</div>
